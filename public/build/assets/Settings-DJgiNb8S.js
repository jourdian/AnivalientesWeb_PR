import{B as E,c as w,r as m,a,o as n,e as v,u as b,m as S,w as V,b as e,y as l,z as d,H as j,A as D,F as y,L as k,E as U,V as F,a5 as g,a6 as h,n as N}from"./app-9nsWn_pQ.js";import{_ as A}from"./AdminLayout-DKUne-xJ.js";import{c as R}from"./createLucideIcon-B2aovmyX.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=R("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),B={class:"flex flex-col gap-6"},M={class:"bg-gray-100 p-6 rounded-lg flex justify-between items-center"},$={class:"text-lg font-semibold mb-2"},z={class:"relative flex flex-col items-center"},H=["src"],P=["src"],O={class:"flex gap-6"},W={class:"w-full bg-white shadow rounded-lg overflow-hidden"},q={class:"flex gap-4 p-4 items-center"},G={class:"w-full text-sm text-left"},J={class:"p-3"},K={class:"p-3"},Q={class:"p-3"},X={class:"p-3 capitalize text-green-600"},Y={class:"p-3"},Z={class:"p-4"},ee={class:"flex space-x-1 text-sm"},te=["onClick","innerHTML"],se={class:"w-1/3 bg-gray-100 p-6 rounded-lg shadow text-sm space-y-4"},le={title:"Enviar notificación en cada cambio de estado de la denuncia",class:"flex justify-between items-center border-b py-2"},oe={title:"Enviar notificación para confirmar la recepción de la denuncia",class:"flex justify-between items-center border-b py-2"},ae={title:"Incluir el logotipo de la administración en el cuerpo del email",class:"flex justify-between items-center py-2"},ue={__name:"Settings",setup(ne){const f=E(),o=w(()=>f.props.administration),x=w(()=>f.props.users),r=m({...f.props.filters}),i=m({showLogo:!0,alwaysNotify:!1,confirmReception:!0,allowRegistration:!1,includeLogoInEmail:!1}),u=m(null),p=m(null);function L(){document.getElementById("logo-input").click()}function I(c){const t=c.target.files[0];t&&(u.value=t,p.value=URL.createObjectURL(t),C())}function C(){if(!u.value)return;const c=new FormData;c.append("logo",u.value),g.post("/settings/logo",c,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{N(()=>{setTimeout(()=>{u.value=null,p.value=null},300)}),g.reload({only:["administration"]})}})}function _(){g.get("/settings",r.value,{preserveState:!0,preserveScroll:!0})}return(c,t)=>(n(),a(y,null,[v(b(S),{title:"Ajustes"}),v(A,{title:"Ajustes"},{default:V(()=>[e("div",B,[e("section",M,[e("div",null,[e("h2",$," Administración: "+l(o.value.name),1),e("p",null,"Teléfono: "+l(o.value.phone),1),e("p",null,"Email: "+l(o.value.email),1),e("p",null,"Dirección: "+l(o.value.address),1),e("p",null,l(o.value.city)+", "+l(o.value.province),1)]),e("div",z,[p.value?(n(),a("img",{key:0,src:p.value,alt:"Vista previa del logo",class:"h-20 object-contain mb-2"},null,8,H)):(n(),a("img",{key:1,src:o.value.logo_path?`/storage/${o.value.logo_path}?v=${Date.now()}`:"/images/Isotipo_Anivalientes_transparente.png",alt:"Logo actual",class:"h-20 object-contain mb-2"},null,8,P)),e("button",{type:"button",onClick:L,class:"absolute bottom-0 right-0 translate-x-1/2 translate-y-1/2 bg-white border border-gray-300 rounded-full p-2 shadow hover:bg-gray-100",title:"Subir logo"},[v(b(T),{class:"w-5 h-5 text-gray-700"})]),e("input",{id:"logo-input",type:"file",accept:"image/*",class:"hidden",onChange:I},null,32)])]),e("section",O,[e("div",W,[t[7]||(t[7]=e("div",{class:"border-b p-4 font-semibold text-sm"},"Usuarios registrados",-1)),e("div",q,[d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.search=s),onInput:_,type:"text",placeholder:"Buscar por nombre o email",class:"border rounded px-3 py-1 text-sm w-1/3"},null,544),[[j,r.value.search]]),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.role=s),onChange:_,class:"border rounded px-3 py-1 text-sm"},t[5]||(t[5]=[e("option",{value:""},"Todos los roles",-1),e("option",{value:"Institutional"},"Institutional",-1),e("option",{value:"Admin"},"Admin",-1)]),544),[[D,r.value.role]])]),e("table",G,[t[6]||(t[6]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"p-3"},"Fecha"),e("th",{class:"p-3"},"Nombre"),e("th",{class:"p-3"},"Email"),e("th",{class:"p-3"},"Rol"),e("th",{class:"p-3"},"Cargo")])],-1)),e("tbody",null,[(n(!0),a(y,null,k(x.value.data,s=>(n(),a("tr",{key:s.id,class:"border-t hover:bg-gray-50"},[e("td",J,l(new Date(s.created_at).toLocaleDateString()),1),e("td",K,l(s.first_name)+" "+l(s.last_name),1),e("td",Q,l(s.email),1),e("td",X,l(s.role),1),e("td",Y,l(s.position||"—"),1)]))),128))])]),e("div",Z,[e("ul",ee,[(n(!0),a(y,null,k(x.value.links,s=>(n(),a("li",{key:s.label},[s.url?(n(),a("button",{key:0,onClick:ie=>b(g).get(s.url,{},{preserveScroll:!0}),innerHTML:s.label,class:F(["px-3 py-1 border rounded",s.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"])},null,10,te)):U("",!0)]))),128))])])]),e("div",se,[t[11]||(t[11]=e("h3",{class:"text-base font-semibold mb-2"},"Preferencias",-1)),e("label",le,[t[8]||(t[8]=e("span",null,"Notificar cambio de estado",-1)),d(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>i.value.alwaysNotify=s),checked:""},null,512),[[h,i.value.alwaysNotify]])]),e("label",oe,[t[9]||(t[9]=e("span",null,"Confirmar recepción",-1)),d(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>i.value.confirmReception=s),checked:""},null,512),[[h,i.value.confirmReception]])]),e("label",ae,[t[10]||(t[10]=e("span",null,"Incluir logo en email",-1)),d(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>i.value.includeLogoInEmail=s),checked:""},null,512),[[h,i.value.includeLogoInEmail]])]),t[12]||(t[12]=e("p",{class:"text-red-600 mt-2"},"⚠️ Las preferencias no han sido implementadas en esta versión demo.",-1))])])])]),_:1})],64))}};export{ue as default};
