import{B as f,c as g,C as _,r as w,D as k,a as n,o as i,e as m,u as s,m as C,w as M,b as e,E as V,y as b,G as F,z as d,H as u,F as U}from"./app-9nsWn_pQ.js";import{_ as j}from"./AdminLayout-DKUne-xJ.js";const B={class:"max-w-3xl mx-auto bg-white p-8 rounded-lg shadow space-y-6 mt-6"},E={key:0,class:"p-4 bg-green-100 text-green-800 rounded border border-green-300"},S={class:"flex items-center gap-6"},D={class:"relative"},N=["src"],G={key:1,class:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-500"},P={class:"flex-1 space-y-4"},L=["value"],R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"pt-6 flex justify-between items-center"},z=["disabled"],O={__name:"Profile",setup(A){const l=f().props.auth.user,x=g(()=>f().props.flash||{}),c=g(()=>x.value.success||null),o=_({_method:"put",first_name:l.first_name??"",last_name:l.last_name??"",phone:l.phone??"",position:l.position??"",photo:null}),p=w(l.photo_path?`/storage/${l.photo_path}`:null);function y(a){const t=a.target.files[0];t&&(o.photo=t,p.value=URL.createObjectURL(t))}function h(){o.first_name=o.first_name??"",o.last_name=o.last_name??"",o.phone=o.phone??"",o.position=o.position??"",o.post(route("profile.update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{window.location.reload()},onError:a=>{console.error("Errores de validación:",a)},data:{_method:"put"}})}return(a,t)=>{const v=k("FlashMessage");return i(),n(U,null,[m(s(C),{title:"Mi perfil"}),m(j,{title:"Mi perfil"},{default:M(()=>[e("div",B,[t[10]||(t[10]=e("h2",{class:"text-xl font-semibold text-gray-800"},"Información personal",-1)),m(v),c.value?(i(),n("div",E,b(c.value),1)):V("",!0),e("div",S,[e("div",D,[p.value?(i(),n("img",{key:0,src:p.value,alt:"Foto de perfil",class:"w-24 h-24 rounded-full object-cover ring-2 ring-gray-300"},null,8,N)):(i(),n("div",G," Sin foto ")),e("input",{type:"file",accept:"image/*",id:"photo",class:"hidden",onChange:y},null,32),t[4]||(t[4]=e("label",{for:"photo",class:"absolute bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 shadow cursor-pointer hover:bg-gray-100",title:"Cambiar foto"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.586-6.586M16 3h5v5"})])],-1))]),e("div",P,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email (no editable)",-1)),e("input",{type:"email",value:s(l).email,disabled:"",class:"w-full border-gray-300 rounded px-3 py-2 bg-gray-100 text-gray-600 cursor-not-allowed"},null,8,L)])])]),e("form",{onSubmit:F(h,["prevent"]),class:"space-y-4"},[e("div",R,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nombre",-1)),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s(o).first_name=r),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[u,s(o).first_name]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Apellidos",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s(o).last_name=r),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[u,s(o).last_name]])])]),e("div",T,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Teléfono",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s(o).phone=r),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[u,s(o).phone]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cargo / posición",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>s(o).position=r),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[u,s(o).position]])])]),e("div",$,[e("button",{type:"submit",disabled:s(o).processing,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded shadow disabled:opacity-50"},b(s(o).processing?"Guardando...":"Guardar cambios"),9,z)])],32)])]),_:1})],64)}}};export{O as default};
